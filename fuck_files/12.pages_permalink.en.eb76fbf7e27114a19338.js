webpackJsonp([12],{785:function(t,e,i){"use strict";function n(t,e){s(e),f.attachTo(document,e),g.attachTo(document),o.attachTo(document,e),w.attachTo(document,e),d.attachTo(document,e),u.attachTo(document,e),p.attachTo(document,e),S.attachTo(document,e),e.excludeExpandingTweets||l.attachTo(t,e);var i=".js-new-items-bar-container";m.attachTo(i,e),e.excludeUserActions||v.attachTo(t,T.merge(e,{genericItemSelector:".js-stream-item"})),r.attachTo(document),a.attachTo(document),c.attachTo(document),h.attachTo(document)}var s=i(786),o=i(790),r=i(791),a=i(792),c=i(793),h=i(794),l=i(795),d=i(801),u=i(802),m=i(803),p=i(271),f=i(805),g=i(813),w=i(814),v=i(815),T=i(28),S=i(817);t.exports=n},786:function(t,e,i){function n(t){s.attachTo(document,t),r.attachTo(document,t),o.attachTo(a,t,{initialFocusSelector:".modal-close"})}var s=i(787),o=i(788),r=i(789),a="#activity-popup-dialog";t.exports=n},787:function(t,e,i){function n(){this.defaultAttrs({noShowError:!0}),this.getUsers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentId},eventData:e,success:"dataActivityPopupSuccess",error:"dataActivityPopupError"})},this.after("initialize",function(){this.on("uiFetchActivityPopup",this.getUsers)})}var s=i(13),o=i(138);t.exports=s(n,o)},788:function(t,e,i){(function(e){function n(){this.defaultAttrs({itemType:"user",titleSelector:".modal-title",contentSelector:".activity-popup-dialog-content",contentShowingSelector:".tweet-showing",userContentSelector:".activity-popup-dialog-users",openDropdownSelector:".user-dropdown.open .dropdown-menu",usersSelector:".activity-popup-users",replyUsersHeadingSelector:".reply-users-heading",activityUserCheckboxSelector:".activity-popup-dialog-users .js-user-checkbox",activityOtherReplyUsersCheckboxSelector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountSelector:".account",saveSelector:".save-action",maxTop:100,modalClasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.setTitle=function(t){this.select("titleSelector").html(t)},this.setContent=function(t,e){this.$node.addClass("has-content");var i=this.select("contentSelector");i.html(t),i.toggleClass(this.attr.contentShowingSelector,!e)},this.setUsers=function(t){this.$node.addClass("has-content"),this.select("userContentSelector").html(t)},this.clearContent=function(){this.$node.removeClass("has-content"),this.select("contentSelector").empty(),this.select("userContentSelector").empty(),this.setTitle("")},this.requestPopup=function(t,e){this.openerNode=t.target,this.excludeReplyUserIds=e.excludeReplyUserIds;var i=e.htmlTitle,n=e.contentId,s=e.component;if(this.attr.eventData=o.merge(this.attr.eventData,{scribeContext:{component:s}},!0),this.defaultEventData=this.attr.eventData,this.attr.modalClasses[s]){this.clearContent();var r=i||"Loading...";this.setTitle(r),Object.keys(this.attr.modalClasses).forEach(function(t){var e=this.attr.modalClasses[t];this.$node.toggleClass(e,t===s)},this),this.open(),this.trigger("uiFetchActivityPopup",{component:s,contentId:n})}},this.updatePopup=function(t,e){this.setTitle(e.htmlTitle),this.setUsers(e.htmlUsers),this.setContent(e.htmlContent),this.trigger("uiActivityPopupRendered"),this.setReplyUsersCheckboxState(this.excludeReplyUserIds);var i=this.select("usersSelector");i.height()>=parseInt(i.css("max-height"),10)&&i.addClass("dropdown-threshold")},this.showError=function(t,i){this.clearContent();var n=e("<p>").addClass("error").html(i.message);this.setUsers(n,!0),this.setTitle("Sorry! There was an error.")},this.notifyOpenerDialogClosed=function(){this.trigger(this.openerNode,"uiActivityPopupClosed")},this.setReplyUsersCheckboxState=function(t){t&&(this.select("activityUserCheckboxSelector").each(function(i,n){var s=e(n),o=s.closest(this.attr.accountSelector),r=o.attr("data-user-id");s.prop("checked",t.indexOf(r)<0)}.bind(this)),this.updateExcludeAllCheckboxState())},this.updateExcludeAllCheckboxState=function(){var t=this.select("activityUserCheckboxSelector"),e=t.length===t.filter(":checked").length;this.select("activityOtherReplyUsersCheckboxSelector").prop("checked",e)},this.saveExcludedReplyUsers=function(){var t=this.select("activityUserCheckboxSelector").filter(":not(:checked)").toArray().map(function(t){return e(t).closest(this.attr.accountSelector).attr("data-user-id")},this);this.trigger(this.openerNode,"uiActivityPopupSave",{excludeReplyUserIds:t})},this.toggleAllReplyUsers=function(t){this.select("activityUserCheckboxSelector").prop("checked",e(t.target).prop("checked"))},this.after("initialize",function(){this.on(document,"uiRequestActivityPopup",this.requestPopup),this.on(document,"dataActivityPopupSuccess",this.updatePopup),this.on(document,"dataActivityPopupError",this.showError),this.on(document,"uiShowProfilePopup uiOpenTweetDialogWithOptions uiNeedsDMDialog uiOpenSignupDialog",this.close),this.on("change",{activityUserCheckboxSelector:this.updateExcludeAllCheckboxState,activityOtherReplyUsersCheckboxSelector:this.toggleAllReplyUsers}),this.on("uiDialogClosed",this.saveExcludedReplyUsers),this.on("uiDialogClosed",this.notifyOpenerDialogClosed)})}var s=(i(25),i(13)),o=i(28),r=i(63),a=i(334),c=i(337);t.exports=s(n,r,c,a)}).call(e,i(1))},789:function(t,e,i){function n(){this.scribeActivityPopupOpen=function(t,e){var i=e.sourceEventData;this.scribe("open",e,{items:[{id:i.contentId,item_type:o.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataActivityPopupSuccess",this.scribeActivityPopupOpen)})}var s=i(13),o=i(45),r=i(43);t.exports=s(n,r)},790:function(t,e,i){function n(){this.curateTweets=function(t,e){function i(t){e.added.forEach(function(){this.scribe({component:"tweet",action:"add_to_timeline"},t)}.bind(this));var i="Tweet successfully added/removed.";this.trigger("uiShowMessage",{message:i}),this.trigger("dataTweetsCurated",t)}function n(t){var e="Failed to add/remove Tweet.";this.trigger("uiShowError",{message:e})}var s={added:e.added,removed:e.removed,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/batch",data:s,eventData:e,success:i.bind(this),error:n.bind(this)})},this.addTweet=function(t,e){function i(t){var e=_("Added Tweet to <a href='{{url}}'>{{name}}</a>",{url:t.timeline_url,name:t.timeline_name});this.trigger("uiShowMessage",{message:e,timeout:1e4}),this.trigger("dataTweetAddedToTimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function n(t){this.trigger("uiShowError",t),this.trigger("dataTweetNotAddedToTimeline",t)}var s={timeline_id:e.timelineId,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/add_tweet",data:s,eventData:e,success:i.bind(this),error:n.bind(this)})},this.removeTweet=function(t,e){function i(t){this.trigger("dataTweetRemovedFromTimeline",t),this.trigger("uiShowMessage",{message:"Tweet successfully removed."}),this.trigger("dataTweetRemovedFromTimeline",t)}function n(t){this.trigger("uiShowError",{message:"Error removing tweet."}),this.trigger("dataTweetNotRemovedFromTimeline",t)}var s={timeline_id:e.timelineId,tweet_id:e.tweetId,id:e.tweetId};this.post({url:"/i/curate/remove_tweet",data:s,eventData:e,success:i.bind(this),error:n.bind(this)})},this.createCustomTimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uiNavigate",{href:t.timeline_url})}function n(t){this.trigger("uiShowError",{message:"Error creating collection."})}var s={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/create",data:s,eventData:e,success:i.bind(this),error:n.bind(this)})},this.updateCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=_("Collection updated. <a href='{{url}}'>Click here to refresh.</a>",{url:t.timeline_url});this.trigger("uiShowMessage",{message:e,timeout:5e3}),this.trigger("dataCustomTimelineUpdated",t)}function n(t){this.trigger("uiShowError",{message:"Error updating collection."})}var s={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:s,eventData:e,success:i.bind(this),error:n.bind(this)})},this.deleteCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uiNavigate",{href:this.attr.timelines_url})}function n(t){this.trigger("uiShowError",{message:"Error deleting collection."})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventData:e,success:i.bind(this),error:n.bind(this)})},this.getFullCustomTimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotFullCustomTimelines",error:"dataFailedToGetFullCustomTimelines"})},this.getCustomTimelinesForDropdown=function(t,e){e.tweetId&&this.get({url:"/i/curate/timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotCustomTimelines",error:"dataFailedToGetCustomTimelines"})},this.after("initialize",function(){r.getDecider("custom_timeline_curation")&&(this.on("uiCurateTweets",this.curateTweets),this.on("uiCurateAddTweet",this.addTweet),this.on("uiCurateRemoveTweet",this.removeTweet),this.on("uiNeedsCustomTimelines",this.getCustomTimelinesForDropdown),this.on("uiNeedsFullCustomTimelines",this.getFullCustomTimelines),this.on("uiCreateCustomTimeline",this.createCustomTimeline),this.on("uiUpdateCustomTimeline",this.updateCustomTimeline),this.on("uiDeleteCustomTimeline",this.deleteCustomTimeline))})}var s=i(13),o=i(138),r=i(37),a=i(43),_=i(25),c=s(n,o,a);t.exports=c},791:function(t,e,i){function n(){this.updateMomentMapAndTriggerEvent=function(t){return function(e){this.momentMap=a.merge(this.momentMap,e.moment_map||{}),this.trigger(document,t,e)}.bind(this)},this.getDropdownUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDropdownUserMomentsSuccess"),error:"dataMomentsGetDropdownUserMomentsFailure"})},this.getDialogUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDialogUserMomentsSuccess"),error:"dataMomentsGetDialogUserMomentsFailure"})},this.addTweetSuccess=function(t,e){var i,n=e.moment_id&&this.momentMap[e.moment_id];n&&(i=n.is_empty_title?_('Tweet added to "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet added to "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:n.title}),this.trigger("uiShowMessage",{message:i}))},this.removeTweetSuccess=function(t,e){var i,n=e.moment_id&&this.momentMap[e.moment_id];n&&(i=n.is_empty_title?_('Tweet removed from "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet removed from "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:n.title}),this.trigger("uiShowMessage",{message:i}))},this.after("initialize",function(){this.momentMap={},this.on("uiMomentsGetDropdownUserMoments",this.getDropdownUserMoments),this.on("uiMomentsGetDialogUserMoments",this.getDialogUserMoments),this.on(document,"dataMomentMakerAddTweetSuccess",this.addTweetSuccess),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.removeTweetSuccess)})}var s=i(13),o=i(138),r=i(43),a=i(28),_=i(25);t.exports=s(n,o,r)},792:function(t,e,i){function n(){this.createActionHandler=function(t,e){return function(i,n){this.post({url:"/i/moments/edit/"+n.moment_id+"/"+t,data:n,success:"dataMomentMaker"+e+"TweetSuccess",error:"dataMomentMaker"+e+"TweetFailure"})}.bind(this)},this.bindAction=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();this.on("uiMomentMaker"+e+"Tweet",this.createActionHandler(t.toLowerCase(),e))},this.sortMoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"dataMomentMakerSortMomentSuccess",error:this.genericErrorMessage.bind(this)})},this.editMetaData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"dataMomentMakerEditMetaSuccess",error:"dataMomentMakerEditMetaFailure"})},this.setCoverData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})},this.setCoverCropData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverCropSuccess",error:"dataMomentMakerSetCoverCropFailure"})},this.setCoverDataByMediaId=function(t,e){function i(){this.trigger("dataMomentMakerSetCoverFailure")}var n=e.fileId,s=o.get(n);if(s)return this.trigger(document,"uiMediaSruInit",{fileId:n,uploadId:s.uploadId,mediaCategory:s.mediaCategory}),this.mediaSruFinalize(s).then(function(t){this.post({url:"/i/moments/edit/"+e.momentId+"/update_cover/"+t,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})}.bind(this)).catch(function(t){throw i(),t})},this.createMoment=function(t,e){function i(t){this.trigger("uiNavigate",{href:t.url})}function n(){this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be created. Give it a minute, then try again."})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:n.bind(this)})},this.deleteMoment=function(t,e){function i(t){this.trigger("dataMomentMakerDeleteMomentSuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"dataMomentMakerDeleteMomentFailure"})},this.updateCrop=function(t,e){function i(){this.trigger("dataMomentMakerUpdateCropFailure"),this.genericErrorMessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"dataMomentMakerUpdateCropSuccess",error:i.bind(this)})},this.updateMomentVisibility=function(t,e){function i(t){t&&t.permission_error?this.trigger("uiShowError",{message:"You do not currently have permission to perform this action."}):this.trigger("uiMomentMakerUpdateVisibilitySuccess",h.merge(t,e))}function n(){this.trigger("uiMomentMakerUpdateVisibilityError",e),this.genericErrorMessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:n.bind(this)})},this.updateNSFWSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment sensitivity updated successfully."})}function n(){this.trigger("dataMomentMakerUpdateNSFWError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:n.bind(this)})},this.updatePublishLocationSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment location setting updated successfully."})}function n(){this.trigger("dataMomentMakerUpdatePublishLocationError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:n.bind(this)})},this.updateThemeColorSetting=function(t,e){function i(){this.trigger("dataMomentMakerUpdateThemeColorError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"dataMomentMakerUpdateThemeColorSuccess",error:i.bind(this)})},this.genericErrorMessage=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.after("initialize",function(){this.bindAction("add"),this.bindAction("remove"),this.bindAction("reorder"),this.on("uiMomentMakerSortMoment",this.sortMoment),this.on("uiMomentMakerEditMeta",this.editMetaData),this.on("uiMomentMakerSetCover",this.setCoverData),this.on("uiMomentMakerSetCoverCrop",this.setCoverCropData),this.on("uiMomentMakerSetCoverByMediaId",this.setCoverDataByMediaId),this.on("uiMomentMakerCreateMoment",this.createMoment),this.on("uiMomentMakerDeleteMoment",this.deleteMoment),this.on("uiMomentMakerUpdateVisibility",this.updateMomentVisibility),this.on("uiMomentMakerUpdateCrop",this.updateCrop),this.on("uiMomentMakerUpdateNSFW",this.updateNSFWSetting),this.on("uiMomentMakerUpdatePublishLocation",this.updatePublishLocationSetting),this.on("uiMomentMakerUpdateThemeColor",this.updateThemeColorSetting)})}var s=i(13),o=i(118),r=i(138),a=i(147),c=i(312),h=i(28);i(25);t.exports=s(n,r,a,c)},793:function(t,e,i){function n(){this.scribeCreateMoment=function(t,e){var i=e&&e.scribeContext&&e.scribeContext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uiMomentMakerCreateMoment",this.scribeCreateMoment)})}var s=i(13),o=i(43);t.exports=s(n,o)},794:function(t,e,i){function n(){this.scribeTweetAction=function(t,e,i){var n=i&&i.scribeContext&&i.scribeContext.component;this.scribe({component:n,element:"moment",action:t})},this.after("initialize",function(){this.on("uiMomentMakerAddTweet",this.scribeTweetAction.bind(this,"add")),this.on("uiMomentMakerRemoveTweet",this.scribeTweetAction.bind(this,"remove")),this.on("dataMomentMakerAddTweetFailure",this.scribeTweetAction.bind(this,"add_failure")),this.scribeOnEvent("uiOpenAddToMomentDialog",{component:"add_to_moment_dialog",action:"open"})})}var s=i(13),o=i(43);t.exports=s(n,o)},795:function(t,e,i){function n(){this.defaultAttrs({tweetSelector:".tweet",tweetFormSelector:".tweet-form",conversationModuleSelector:".conversation-module",animatedGifSelector:".animated-gif"})}var s=i(13),o=i(796),r=i(797),a=i(291),c=i(798),h=i(800),l=i(274),d=i(372);t.exports=s(n,r,c,h,a,d,l,o)},796:function(t,e,i){(function(e){var n=i(23),s=i(39);t.exports=function(){n.mixin(this,[s]),this.getPlayableMediaEventData=function(t){var e={},i=t.find("[data-media-id]").attr("data-media-id");if(i)e.playlist_url=i,e.video_uuid=i;else{var n=t.find("[data-card-url]").attr("data-card-url");e.playlist_url=n,e.video_uuid=n}return e.video_type="video",e.card_details=JSON.stringify(e),e},this.logPlayableMediaEvents=function(t,i,n){var s,o=i.attr("data-tweet-id");s="animated_gif"===n||"__entity_animated_gif"===n?"gif_player":"vine_player";var r=e.extend({},this.interactionData(i),this.getPlayableMediaEventData(i));this.eventsFired.view[o]||(this.trigger("uiPlayableMediaEvent",e.extend({name:"video_content_view"},r)),this.scribeInteraction({action:"video_view",element:s},r),this.eventsFired.view[o]=!0),this.eventsFired[t][o]||(this.trigger("uiPlayableMediaEvent",e.extend({name:"video_content_"+t},r)),this.scribeInteraction({action:t,element:s},r),this.eventsFired[t][o]=!0)},this.shouldCollectAnalytics=function(t,e){return"animated_gif"===e||t.data("has-vine")},this.onAutoplayStart=function(t){var i=e(t.target);if(i.length){var n=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,n)&&(this.autoplayTimeout=setTimeout(function(){this.logPlayableMediaEvents("view_threshold",i,n)}.bind(this),3e3))}},this.onAutoplayStop=function(){this.autoplayTimeout&&clearTimeout(this.autoplayTimeout)},this.onTweetExpanded=function(t){var i=e(t.target);if(i.length){var n=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,n)&&this.logPlayableMediaEvents("play_from_tap",i,n)}},this.after("initialize",function(){this.eventsFired={view:{},play_from_tap:{},view_threshold:{}},this.on("uiLOHPMediaPlay",this.onTweetExpanded),this.on("uiAutoplayMedia",this.onAutoplayStart),this.on("uiStopAutoplayingMedia",this.onAutoplayStop)})}}).call(e,i(1))},797:function(t,e,i){(function(e){t.exports=function(){this.defaultAttrs({missingTweetsLinkSelector:"a.missing-tweets-link",missingTweetsBarSelector:".missing-tweets-bar",focalTweetSelector:".original-tweet",topLevelStreamItemSelector:".stream-item:not(.conversation-tweet-item)",conversationTweetClass:"conversation-tweet",detachedConversationClass:"detached-conversation",expandingConversationClass:"expanding-conversation",selectedSelector:".selected-stream-item",awaitingAncestorsClass:".conversation-awaiting-ancestors"}),this.handleExpandConversationAndLoadMissingTweets=function(t){t.preventDefault();var e=this.streamItemFromEvent(t),i=this.getFocalPoint(e),n=i.data("permalink-path"),s=i.data("conversation-id");n&&this.trigger("uiNavigate",{href:n,conversation_id:s})},this.streamItemFromEvent=function(t){return e(t.target).closest(this.attr.topLevelStreamItemSelector)},this.getFocalPoint=function(t){return t.find(this.attr.focalTweetSelector)},this.getTweetId=function(t){return e(t).find(".tweet").attr("data-tweet-id")},this.notifyConversationMutated=function(t,i){var n=e(t.target),s=n.closest(this.attr.conversationModuleSelector);s.length&&this.trigger(s,"uiConversationModuleUpdated")},this.after("initialize",function(){this.on("click",{missingTweetsLinkSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiShortcutEnter",{missingTweetsBarSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiTweetInserted uiBeforeTweetRemoved",this.notifyConversationMutated)})}}).call(e,i(1))},798:function(t,e,i){(function(e){function n(){this.getSize=function(t,e){var i=e.attr("data-width"),n=e.attr("data-height"),s=e.width(),o=n*(s/i);return{h:o,w:s}},this.createMediaElement=function(t,e,i){return new MediaElement(t,{pluginPath:s.path,flashName:"flashmediaelement.swf",loop:!0,defaultVideoHeight:e.h,defaultVideoWidth:e.w,pluginHeight:e.h,pluginWidth:e.w,success:i})},this.prepareMediaElement=function(t,e){var i=function(t){this.setCurrentTime(t,0),t.play()}.bind(this),n=this.createMediaElement(t,e,function(t){t.addEventListener("ended",function(){t&&i(t)},!1),t.addEventListener("timeupdate",function(){if("native"===n.pluginType&&t.duration<=t.currentTime){var e=function(){i(t),t.removeEventListener("loadeddata",e)};t.addEventListener("loadeddata",e),t.load()}},!1),t.play()});return n},this.getPlayer=function(t){if(t.length){var e=t.find(this.attr.animatedGifSelector);if(e.length)return this.players[t.attr("data-tweet-id")]}return null},this.setCurrentTime=function(t,e){"native"===t.pluginType?t.currentTime=e:t.setCurrentTime(e)},this.autoplayGif=function(t){this.startGif(e(t.target).closest(".tweet"))},this.startGifOnEvent=function(t){this.startGif(e(t.target))},this.startGif=function(t){if(t=t.filter(":not(.animated-gif-playing)").has(this.attr.animatedGifSelector),t.length){var e=t.attr("data-tweet-id");if(!this.players[e]){var i=t.find(this.attr.animatedGifSelector),n=i.find("[video-src]");n.attr("src",n.attr("video-src"));var s=i.get(0),o=this.getSize(t,i);this.players[e]=this.prepareMediaElement(s,o),this.players[e].load()}t.addClass("animated-gif-playing"),setTimeout(function(){this.players[e]&&this.players[e].play&&this.players[e].play()}.bind(this),1)}},this.stopAutoplayingGif=function(t){this.stopGif(e(t.target).closest(".tweet"))},this.stopGifOnEvent=function(t){this.stopGif(e(t.target))},this.stopGif=function(t){var e=t.hasClass("animated-gif-playing")&&this.getPlayer(t);e&&(t.removeClass("animated-gif-playing"),t.find(".me-plugin").remove(),e.pause&&e.pause())},this.pauseGif=function(t){var i=e(t.target),n=i.hasClass("animated-gif-playing")&&this.getPlayer(i);n&&n.pause&&n.pause()},this.seekGif=function(t,i){var n=e(t.target),s=n.hasClass("animated-gif-playing")&&this.getPlayer(n);if(s){var o=i.position*s.duration;isNaN(s.duration)||(this.setCurrentTime(s,Math.min(o,s.duration)),s.pause())}},this.after("initialize",function(){this.players={},this.on("uiAutoplayMedia",this.autoplayGif),this.on("uiStartGif",this.startGifOnEvent),this.on("uiStopAutoplayingMedia",this.stopAutoplayingGif),this.on("uiStopGif",this.stopGifOnEvent),this.on("uiPauseGif",this.pauseGif),this.on("uiSeekGif",this.seekGif)})}var s=i(799);t.exports=n}).call(e,i(1))},799:function(t,e){t.exports={path:"/flash/1/"}},800:function(t,e,i){(function(e){var n=i(23),s=i(39);t.exports=function(){n.mixin(this,[s]),this.defaultAttrs({snapReelVideoSelector:"video.js-snap-reel",easingAcceleration:.5,FPS:e.browser.chrome?20:30}),this.logInteraction=function(t){var e=t.attr("data-tweet-id");this.eventScribed[e]||(this.scribeInteraction({action:"snap_reel_interaction"},this.interactionData(t)),this.eventScribed[e]=!0)},this.mouseOver=function(t){this.video=e(t.target),this.tweet=this.video.parents(this.attr.tweetSelector),this.tweet.hasClass("animated-gif-playing")&&(this.scribeTimeout=setTimeout(function(){this.logInteraction(this.tweet,this.video)}.bind(this),3e3)),this.start()},this.mouseOut=function(t){clearTimeout(this.scribeTimeout),this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.tweet.removeClass("animated-gif-playing"),this.trigger(this.tweet,"uiStartGif")),this.stop(),this.scribeTimeout=void 0,this.tweet=void 0,this.targetPosition=void 0},this.mouseMove=function(t){this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.targetPosition=t.pageX-this.video.offset().left)},this.start=function(){this.running=!0,this.tick()},this.stop=function(){this.running=!1},this.tick=function(){if(this.running){var t=1e3/this.attr.FPS;setTimeout(function(){requestAnimationFrame(this.tick.bind(this)),this.update()}.bind(this),t)}},this.update=function(){if(this.targetPosition){this.currentPosition+=(this.targetPosition-this.currentPosition)*this.attr.easingAcceleration;var t=this.currentPosition/this.video.width();this.trigger(this.tweet,"uiSeekGif",{position:t})}},this.after("initialize",function(t,e){this.scribeTimeout=void 0,this.eventScribed={},this.currentPosition=0,this.on("mouseover",{snapReelVideoSelector:this.mouseOver}),this.on("mouseout",{snapReelVideoSelector:this.mouseOut}),this.on("mousemove",{snapReelVideoSelector:this.mouseMove})})}}).call(e,i(1))},801:function(t,e,i){function n(){this.updateViewPossiblySensitive=function(t,e){var i={display_sensitive_media:e.display_sensitive_media};this.post({url:"https://api.twitter.com/1.1/account/settings.json",data:i,useOAuthSessionAuth:!0})},this.after("initialize",function(){this.on("uiUpdateViewPossiblySensitive",this.updateViewPossiblySensitive)})}var s=i(13),o=i(138);t.exports=s(n,o)},802:function(t,e,i){function n(){this.deleteMediaTag=function(t,e){var i=function(t){this.trigger("dataMediaTagRemoveSuccess",t)},n=function(t,i,n){this.trigger("dataMediaTagRemoveFailure",{id:e.id,status:i,errorThrown:n})},s={status_id:e.id};this.post({url:"/i/media/media_tags/delete",data:s,eventData:e,success:i.bind(this),error:n.bind(this)})},this.after("initialize",function(){this.on("uiDidRemoveMediaTag",this.deleteMediaTag)})}var s=i(13),o=i(138),r=s(n,o);t.exports=r},803:function(t,e,i){(function(e){function n(){this.defaultAttrs({newItemsBarSelector:".js-new-tweets-bar",containerSelector:".stream-container",newTweetsBarVisibleClass:"new-tweets-bar-visible",scrollTopOnNewItemsClick:!0}),this.updateNewItemsBar=function(t,i){if(t.target.contains(this.node)){var n=e(i.html),s=this.select("newItemsBarSelector");s.length?(s.replaceWith(n),this.trigger("uiNewItemsBarUpdated")):(this.$node.html(n),this.$node.hide(),this.showNewItemsBar(),this.trigger("uiNewItemsBarShown")),this.trigger("uiNewItemsBarVisible")}},this.showNewItemsBar=function(){var t=this.$node.parent(),i=o.getCanvasYOffset(t),n=e(window).scrollTop();this.$node.addClass(this.attr.newTweetsBarVisibleClass),n>i?(this.$node.show(),e("html, body").scrollTop(n+this.$node.height())):this.$node.slideDown()},this.hideNewItemsBar=function(){this.trigger("uiNewItemsBarHidden");var t=this.select("newItemsBarSelector");t.remove(),this.$node.removeClass(this.attr.newTweetsBarVisibleClass)},this.handleNewItemsBarClick=function(t,i){var n=e(t.target).closest("[data-live-video-item-json]").attr("data-live-video-item-json");this.attr.scrollTopOnNewItemsClick&&r(0,"fast"),this.trigger("uiInjectNewItems",{fromClick:!0});var s=e(t.target).attr("data-item-count"),o={unreadCount:Number(s)};if(n)try{o.items=[JSON.parse(n)]}catch(t){}this.trigger("uiNewItemsBarClick",o)},this.after("initialize",function(){this.on(document,"uiUpdateNewItemsBar",this.updateNewItemsBar),this.on(document,"uiHideNewItemsBar",this.hideNewItemsBar),this.on("click",{newItemsBarSelector:this.handleNewItemsBarClick})})}var s=i(13),o=i(77),r=i(804);t.exports=s(n)}).call(e,i(1))},813:function(t,e,i){function n(t){this.defaultAttrs({itemType:"tweet"}),this.scribeActivityCount=function(t,e,i){var n={component:this.attr.itemType,element:t,action:"click"};this.scribe(n,this.interactionData(e))},this.after("initialize",function(){this.on("uiRequestReplyActivity",this.scribeActivityCount.bind(this,"reply_count")),this.on("uiRequestRetweetedActivity",this.scribeActivityCount.bind(this,"retweet_count")),this.on("uiRequestFavoritedActivity",this.scribeActivityCount.bind(this,"favorite_count"))})}var s=i(13),o=i(39),r=i(42),a=s(n,o,r);t.exports=a},814:function(t,e,i){function n(){this.getTweetTranslation=function(t,e){var i=function(e){e&&e.message&&this.trigger("uiShowMessage",{message:e.message}),this.trigger(t.target,"dataTweetTranslationSuccess",e)},n=function(i,n,s){this.trigger(t.target,"dataTweetTranslationError",{id:e.id,status:n,errorThrown:s})},s={id:e.tweetId,dest:e.dest};this.get({url:"/i/translations/show.json",data:s,eventData:e,success:i.bind(this),error:n.bind(this)})},this.submitTweetTranslation=function(t,e){var i=function(e){this.trigger(t.target,"dataTweetTranslationSuggestionSuccess",e)},n=function(i,n,s){this.trigger(t.target,"dataTweetTranslationSuggestionError",{id:e.id,status:n,errorThrown:s})};this.post({url:"/i/translations/suggest.json",data:e,eventData:e,success:i.bind(this),error:n.bind(this)})},this.after("initialize",function(){this.on("uiNeedsTweetTranslation",this.getTweetTranslation),this.on("uiSuggestTweetTranslation",this.submitTweetTranslation)})}var s=i(13),o=i(138),r=s(n,o);t.exports=r},815:function(t,e,i){function n(){}var s=i(13),o=i(816),r=i(337);t.exports=s(n,r,o)},816:function(t,e,i){(function(e){function i(){this.getItemPosition=function(t){return e(this.attr.genericInteractionItemSelector).index(t.closest(this.attr.genericInteractionItemSelector))}}t.exports=i}).call(e,i(1))},817:function(t,e,i){function n(){this.scribeTweetPivotClick=function(t,e){this.scribe({component:"tweet",element:"more",action:"click"},{items:[e.item_details,e.component_details]})},this.after("initialize",function(){this.on("uiTweetPivotClick",this.scribeTweetPivotClick)})}var s=i(13),o=i(43),r=s(n,o);t.exports=r},835:function(t,e,i){(function(e){i(25);t.exports=function(){this.defaultAttrs({adaptivePhotoContainer:".js-adaptive-photo",adaptiveMediaContainer:".AdaptiveMedia"}),this.getPermalinkPath=function(t){return t.closest(this.attr.streamItemSelector).find(this.attr.permalinkSelector).attr("href")},this.openAdaptiveMediaGallery=function(t,i){t.preventDefault(),t.stopPropagation();var n=e(t.target).closest(this.attr.adaptivePhotoContainer);this.trigger(t.target,"uiOpenGallery",{title:"Photo",timelineSelector:this.attr.adaptiveMediaContainer,inOverlay:this.attr.inOverlay});var s=n.closest("[data-impression-id]");s.length&&(s.attr("data-embedded-media-logged",!0),this.trigger("uiEmbeddedMedia",{impressionId:s.data("impression-id"),disclosureType:s.data("disclosure-type")})),i&&i.skipClickScribe||this.trigger("uiMediaThumbnailClick",{url:n.attr("data-image-url"),mediaType:"photo"})},this.openSelectedTweetAdaptiveMediaGallery=function(t){this.trigger(e(t.target).find(this.attr.adaptivePhotoContainer),"uiKeyboardOpenAdaptiveGallery",{skipClickScribe:!0})},this.after("initialize",function(){this.on(document,"uiOpenSelectedPhoto",this.openSelectedTweetAdaptiveMediaGallery),
this.on("click uiKeyboardOpenAdaptiveGallery",{adaptivePhotoContainer:this.openAdaptiveMediaGallery})})}}).call(e,i(1))},836:function(t,e){function i(){this.updateYouFollow=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-follow]").attr("data-you-follow",e)},this.updateYouBlock=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-block]").attr("data-you-block",e)},this.setViewerFollowState=function(t){return function(e,i){this.updateYouFollow(i.userId,t)}},this.setViewerBlockState=function(t){return function(e,i){this.updateYouBlock(i.userId,t)}},this.onFollowStateChange=function(t,e){var i=e.userId,n=e.newState;"following"===n?(this.updateYouFollow(i,!0),this.updateYouBlock(i,!1)):"not-following"===n?(this.updateYouFollow(i,!1),this.updateYouBlock(i,!1)):"blocked"===n&&(this.updateYouFollow(i,!1),this.updateYouBlock(i,!0))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.setViewerFollowState(!0)),this.on(document,"uiUnfollowAction uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerFollowState(!1)),this.on(document,"uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerBlockState(!0)),this.on(document,"dataFollowStateChange",this.onFollowStateChange)})}t.exports=i},843:function(t,e,i){(function(e){function n(){this.defaultAttrs({tweetSelector:".tweet",tweetActionSelector:".ProfileTweet-action",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",retweetCountSelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",replyCountSelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",actionCountForPresentationSelector:".ProfileTweet-actionCountForPresentation",actionCountForAriaSelector:".ProfileTweet-actionCountForAria",zeroCountClass:"ProfileTweet-actionCount--isZero"});var t=e("html").attr("lang");this.updateTweetStats=function(t,e){e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.statElementSelectorFor(t.name));this.updateAria(i,t.count,t.title),this.updatePresentation(i,t.count,t.compact_count)}.bind(this))},this.initializeTweetStats=function(t,i){var n=this.findUninitializedTweetOrRetweet();n.each(function(t,i){this.renderTweetStats(e(i))}.bind(this))},this.renderTweetStats=function(e){e.attr("data-tweet-stat-initialized","true"),["favorite","retweet","reply"].forEach(function(i){var n=i,s=e.find(this.statElementSelectorFor(n)),r=s&&s.attr("data-tweet-stat-count");if(void 0!==r){var a=o.compactOrCommaize(r,t);this.updatePresentation(s,r,a)}}.bind(this))},this.updatePresentation=function(t,e,i){var n=t.find(this.attr.actionCountForPresentationSelector);t.attr("data-tweet-stat-count",Math.max(e,0)),e<=0?(t.addClass(this.attr.zeroCountClass),n.empty()):(t.removeClass(this.attr.zeroCountClass),n.text(i))},this.updateAria=function(t,e,i){var n=t.find(this.attr.actionCountForAriaSelector);n.text(i),e<=0?(t.attr("aria-hidden","true"),n.removeAttr("data-aria-label-part")):(t.removeAttr("aria-hidden"),n.attr("data-aria-label-part","0"))},this.findTweetOrRetweet=function(t){var e=this.select("tweetSelector").filter("[data-tweet-id="+t+"]");return e.length||(e=this.select("tweetSelector").filter("[data-retweet-id="+t+"]")),e},this.findUninitializedTweetOrRetweet=function(){return this.select("tweetSelector").filter(":not([data-tweet-stat-initialized=true])")},this.statElementSelectorFor=function(t){var e={favorite:this.attr.favoriteCountSelector,retweet:this.attr.retweetCountSelector,reply:this.attr.replyCountSelector};return e[t]},this.after("initialize",function(){this.on("uiSwiftLoaded uiPageChanged uiNeedUpdateInjectedTweetStats",this.initializeTweetStats),this.on("dataGotTweetStats",this.updateTweetStats)})}var s=i(13),o=i(806),r=i(844);t.exports=s(n,r)}).call(e,i(1))},844:function(t,e){function i(){this.defaultAttrs({retweetStatSelector:".js-stat-retweets a",favoriteStatSelector:".js-stat-favorites a",tweetStatCountSelector:"data-tweet-stat-count",displayCountSelector:"strong"}),this.updateSocialProofStats=function(t,e){t.target===document&&e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.socialProofStatElementSelectorFor(t.name));this.updateSocialProofStat(i,t)}.bind(this))},this.socialProofStatElementSelectorFor=function(t){var e={retweet:this.attr.retweetStatSelector,favorite:this.attr.favoriteStatSelector};return e[t]},this.updateSocialProofStat=function(t,e){t.attr(this.attr.tweetStatCountSelector,e.count),t.find(this.attr.displayCountSelector).text(e.commaized_count)},this.after("initialize",function(){this.on("dataGotTweetStats",this.updateSocialProofStats)})}t.exports=i},884:function(t,e,i){var n=i(145);t.exports=function(t){var e=n.fromQuery(location).multiplier,i=window.DEBUG.multiplier||e||1;return t*i}},950:function(t,e,i){(function(e){function n(){this.viewportHelpers=a,this.defaultAttrs({tweetSelector:".tweet",itemType:"tweet",checkVisibilityInterval:500}),this.checkTweetVisibility=function(){var t=this.allVisibleTweets(),e=t.map(function(t){return this.interactionDataWithCard(t)},this);this.trigger("uiTweetsVisible",{tweetData:e})},this.allVisibleTweets=function(){var t=this.select("tweetSelector"),e=this.findVisibleTweet(t);if(e===-1)return[];for(var i=[],n=e;t[n]&&a.isWithinBounds(this.$window,t.eq(n));)i.push(t[n]),n--;for(i.reverse(),n=e+1;t[n]&&a.isWithinBounds(this.$window,t.eq(n));)i.push(t[n]),n++;return i},this.findVisibleTweet=function(t){var e=a.getContainerRect(this.$window);return this.findVisibleTweetRecursive(t.length,0,t,0,e)},this.findVisibleTweetRecursive=function(t,e,i,n,s){var o=Math.floor((t-e)/2+e);return o===e||n>100?-1:a.isAboveViewport(this.$window,i.eq(o),0,s)?this.findVisibleTweetRecursive(t,o,i,n+1,s):a.isBelowViewport(this.$window,i.eq(o),0,s)?this.findVisibleTweetRecursive(o,e,i,n+1,s):o},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.$window=e(window),this.pollingInterval=r.setIntervalEvent("uiCheckTweetVisibility",this.attr.checkVisibilityInterval),this.on(document,"uiCheckTweetVisibility",this.checkTweetVisibility)})}var s=i(13),o=i(39),r=i(12),a=i(76);t.exports=s(n,o)}).call(e,i(1))},951:function(t,e,i){function n(){this.defaultAttrs({scribeInterval:6e4,page:void 0}),this.getTime=function(){return Date.now()},this.handleTweetsVisible=function(t,e){this.recordVisibleTweets(e.tweetData)},this.recordVisibleTweets=function(t){var e={},i=this.getTime();t.forEach(function(t){this.visibleTweets[t.tweetId]?e[t.tweetId]=o.merge(this.visibleTweets[t.tweetId],{visibility_end:i}):e[t.tweetId]=o.merge(t,{visibility_start:i,visibility_end:i})},this),this.visibleTweetKeys().forEach(function(t){var i=this.visibleTweets[t],n=!e[t],s=i.visibility_start!==i.visibility_end;n&&s&&this.previouslyVisibleTweets.push(this.visibleTweets[t])},this),this.visibleTweets=e},this.flushVisibleTweets=function(t,e){var i=this.getTime();this.visibleTweetKeys().forEach(function(t){this.visibleTweets[t].visibility_end=i},this),this.recordVisibleTweets([]),this.scribeVisibilityResults()},this.onScribeVisibilityResults=function(t,e){e.page===this.attr.page&&this.scribeVisibilityResults()},this.scribeVisibilityResults=function(){if(this.previouslyVisibleTweets.length){var t={component:"stream",element:"linger",action:"results"},e={items:this.previouslyVisibleTweets.map(function(t){return this.interactionItem(t)},this)};this.previouslyVisibleTweets=[],this.scribe(t,e)}},this.visibleTweetKeys=function(){return Object.keys(this.visibleTweets).filter(function(t){return this.visibleTweets.propertyIsEnumerable(t)},this)},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.visibleTweets={},this.previouslyVisibleTweets=[],this.pollingInterval=c.setIntervalEvent("uiScribeVisibilityResults",this.attr.scribeInterval,{page:this.attr.page}),this.on(document,"uiScribeVisibilityResults",this.onScribeVisibilityResults),this.on(document,"uiBeforePageChanged uiTeardown",this.flushVisibleTweets),this.on("uiTweetsVisible",this.handleTweetsVisible)})}var s=i(13),o=i(28),r=i(43),a=i(42),c=i(12);t.exports=s(n,r,a)},961:function(t,e,i){var n=i(962),s=i(963),o=i(75),r=i(964),a=i(965),c=i(966),h=i(967),l=i(968),d=i(970),u=i(90),m=i(782),p=i(785),f=i(756),g=i(843),w=i(972),v=i(369),T=i(973),S=i(974),C=i(975),y=i(950),b=i(951),k=i(28),M=i(61),I=i(1448),D=i(1026),x=i(396),A=i(400),P=i(1449),R=i(925),z=i(1452),O=i(1453),E=i(1454),L=i(406),F=i(1455),V=i(290),$=i(282),N=i(1087);t.exports=function(t){function e(e){return k.merge(t,{eventData:{scribeContext:{component:e}},itemType:"tweet",lastItemSelector:".tweet:last",inOverlay:t.inOverlay,genericItemSelector:".js-stream-tweet",useDeduping:!0})}var i=".PermalinkOverlay",U=t.inOverlay?i:"#page-container.wrapper-permalink",B=U+" div.permalink-tweet-container",G=".suggested-tweet-stream-container",j="div.permalink-tweet",q=".permalink-replies .stream-container",H="tweet",W=".original-tweet";M(t),u(t),R(t),P(t),A.attachTo(document),p(U,k.merge(t,{generalTweetSelector:j,marginBreaking:!1})),y.mixin(C).attachTo(i,{eventData:t.eventData,fromPermalinkOverlay:!0}),b.attachTo(i,{page:"permalink_overlay"}),n.attachTo(document),I.attachTo(document);var K,Y,Q=k.merge(t,{statsName:"swift_permalink_timeline"});t.inOverlay?(Q=k.merge(Q,{infiniteScrollNode:i,contentSelector:".PermalinkOverlay-body .permalink-container"}),s.attachTo("div.in-reply-to",{windowSelector:i})):s.attachTo("div.in-reply-to"),m(Q),K=h.mixin(F),Y=l.mixin(F),r.attachTo(".permalink"),S.attachTo(B,e(H)),S.attachTo(q,e(H)),c.attachTo(".permalink",e(H)),g.attachTo(document),f.mixin.apply(this,[v,w]).attachTo(B,e(H)),x.attachTo(B,e(H)),Y.attachTo(".in-reply-to",e("conversation")),f.mixin(v).attachTo(".in-reply-to",e("conversation")),x.attachTo(".in-reply-to",e("conversation")),K.attachTo(".replies-to",e("replies")),f.mixin(v).attachTo(".replies-to",e("replies")),x.attachTo(".replies-to",e("replies")),p(G,k.merge(e("conversation-suggestions"),{generalTweetSelector:W})),d.attachTo(G,e("conversation-suggestions"),{tweetContainerSelector:W,tweetWithReplyDialogSelector:W}),f.mixin.apply(this,[T]).attachTo(G,e("conversation-suggestions")),x.attachTo(G,e("conversation-suggestions")),N.attachTo(U,e("conversation-suggestions")),z.attachTo(".replies-to",t),O.attachTo(document),E.attachTo(document),t.loggedIn?D(k.merge(t,{show_context:!1})):a.attachTo("body"),L.attachTo(".PermalinkProfile-dismiss, .PermalinkProfile-overlay",{eventData:{scribeContext:{component:"dialog"}}});var J=window;t.inOverlay&&(o.attachTo(i,{watchDocumentScroll:!1}),$.attachTo(i,{watchDocumentScroll:!1}),J=i),V.attachTo(J,{containerSelector:".PermalinkOverlay-body",unloadedCardsFilter:'#ancestors [data-has-autoplayable-media="true"], .permalink-replies [data-has-autoplayable-media="true"], .cards-forward .js-macaw-cards-iframe-container, .permalink-tweet .js-macaw-cards-iframe-container'})}},962:function(t,e,i){function n(){this.defaultAttrs({permalinkPageTweetSelector:".PermalinkOverlay .permalink-tweet",ownTweetSelector:".my-tweet"}),this.triggerBlock=function(){this.triggerBlockActionOnNode(this.select("permalinkPageTweetSelector"),"uiOpenBlockUserDialog")},this.triggerMute=function(){this.triggerBlockActionOnNode(this.select("permalinkPageTweetSelector"),"uiDidMuteUser")},this.after("initialize",function(){this.on(document,"uiShortcutBlock",this.triggerBlock),this.on(document,"uiShortcutMuteUser",this.triggerMute)})}var s=i(13),o=i(823),r=i(825);t.exports=s(n,o,r)},963:function(t,e,i){(function(e){function n(){this.defaultAttrs({ancestorAdjustmentClass:"multiple-ancestors-adjustment",hiddenAncestorClass:"is-hiddenAncestor",doBottomPaddingAdjustment:!0,focalTweetTopPadding:125,permalinkOverlayDistanceFromTopOfPage:64,ancestorTweetsSelector:".ancestor",threadedConversationTweetSelector:".ThreadedConversation-tweet",focalTweetSelector:".permalink-tweet-container",pageContainerSelector:"#page-container",windowSelector:window,documentSelector:document}),this.showHiddenAncestors=function(){var t=this.select("ancestorTweetsSelector"),i=e(this.attr.windowSelector);if(t.length){e("body").removeClass(this.attr.ancestorAdjustmentClass),this.select("threadedConversationTweetSelector").removeClass(this.attr.hiddenAncestorClass);var n=this.getTopOffset(e(this.attr.focalTweetSelector));if(this.attr.doBottomPaddingAdjustment){var s=n+this.attr.focalTweetTopPadding-e(this.attr.documentSelector).height()+i.height();e(this.attr.pageContainerSelector).css("padding-bottom",s)}i.scrollTop(n-this.attr.focalTweetTopPadding)}},this.getTopOffset=function(t){return this.attr.windowSelector===window?o.getCanvasYOffset(t)-1:t.position().top+this.attr.permalinkOverlayDistanceFromTopOfPage},this.after("initialize",function(){this.on(document,"uiOverlayPageChanged uiPageChanged uiSwiftLoaded",this.showHiddenAncestors)})}var s=i(13),o=i(77);t.exports=s(n)}).call(e,i(1))},964:function(t,e,i){function n(){this.defaultAttrs({repliesSelector:".replies-to .stream-items .tweet",hasRepliesClass:"has-replies"}),this.updateRepliesState=function(){var t=this.select("repliesSelector");t.length?this.$node.addClass(this.attr.hasRepliesClass):this.$node.removeClass(this.attr.hasRepliesClass)},this.after("initialize",function(){this.on(document,"uiTweetInserted uiTweetRemoved",this.updateRepliesState)})}var s=i(13);t.exports=s(n)},965:function(t,e,i){function n(){this.defaultAttrs({dialogSelector:"#sms-codes-dialog",triggerSelector:".sms-codes-link"}),this.after("initialize",function(){this.$dialog=this.select("dialogSelector")})}var s=i(13),o=i(63),r=s(n,o);t.exports=r},966:function(t,e,i){(function(e){function n(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet",permalinkTweetForm:".permalink-tweet-container + .inline-reply-tweetbox .tweet-form"}),this.homePath="/",this.expandTweetBox=function(t){var i=e(t.target);i.is(this.attr.permalinkTweetSelector)&&this.trigger(this.select("permalinkTweetForm"),"uiComposerResetAndFocus")},this.redirectHome=function(t,e){var i=this.$node.find('[data-tweet-id="'+e.sourceEventData.id+'"]');i.is(this.attr.permalinkTweetSelector)&&window.location.replace(this.homePath)},this.after("initialize",function(){this.attr.loggedIn&&(this.on("uiReplyToTweet",this.expandTweetBox),this.on(document,"dataDidDeleteTweet",this.redirectHome))})}var s=i(13),o=s(n);t.exports=o}).call(e,i(1))},967:function(t,e,i){(function(e){"use strict";function n(){this.defaultAttrs({itemType:"tweet",tweetSelector:".tweet",hiddenRepliesContainerSelector:".hidden-replies-container",descendantTweetSelector:".tweet.descendant",threadedConversationClass:"ThreadedConversation--loneTweet ThreadedConversation--ownReply"}),this.injectThreadedReply=function(t){t.wrap("<div class='"+this.attr.threadedConversationClass+"'></div>"),this.$repliesContainer.prepend(t.parent())},this.injectOwnReply=function(t,i){if(this.attr.tweetId===i.in_reply_to_status_id){var n=e(i.tweet_html);this.attr.isThreaded?this.injectThreadedReply(n):(this.reachedTheEnd()?this.$repliesContainer:this.$hiddenRepliesContainer).append(n),this.$node.removeClass("hidden"),this.trigger("uiTweetInserted",i),this.trigger(n.find(this.attr.tweetSelector),"uiHasInjectedTimelineItem")}},this.restoreHiddenReplies=function(t,i){this.$hiddenRepliesContainer.children().each(function(t,i){var n=e(i),s=n.find(this.attr.tweetSelector).attr("data-tweet-id");this.$repliesContainer.children().each(function(t,i){var o=e(i),r=o.find(this.attr.tweetSelector).attr("data-tweet-id"),a=c.compare(s,r);return 0===a?(n.remove(),!1):a<0?(n.insertBefore(o),!1):void 0}.bind(this))}.bind(this)),this.reachedTheEnd()&&(this.$repliesContainer.append(this.$hiddenRepliesContainer.html()),this.$hiddenRepliesContainer.html(""))},this.reachedTheEnd=function(){return!this.select("timelineEndSelector").hasClass("has-more-items")},this.hideReplies=function(t,e){this.select("descendantTweetSelector").length||this.$node.addClass("hidden")},this.after("initialize",function(){this.$repliesContainer=this.select("itemsSelector"),this.$hiddenRepliesContainer=this.select("hiddenRepliesContainerSelector"),this.on("uiTweetRemoved",this.hideReplies),this.on(document,"dataTweetSuccess",this.injectOwnReply),this.on("uiHasInjectedOldTimelineItems",this.restoreHiddenReplies)})}var s=i(821),o=i(828),r=i(837),a=i(334),c=i(154),h=i(835);t.exports=s.mixin(n,o,r,a,h)}).call(e,i(1))},968:function(t,e,i){"use strict";function n(){this.defaultAttrs({itemType:"tweet",tweetSelector:".tweet",ancestorTweetSelector:".tweet.ancestor"}),this.removeAncestors=function(){this.select("ancestorTweetSelector").length||this.$node.remove()},this.after("initialize",function(){this.on("uiTweetRemoved",this.removeAncestors)})}var s=i(821),o=i(969),r=i(837),a=i(334),c=i(835);t.exports=s.mixin(n,o,r,a,c)},969:function(t,e,i){(function(e){function i(){this.defaultAttrs({endOfStreamSelector:".stream-footer",errorMessageSelector:".stream-fail-container",tryAgainSelector:".try-again-after-whale"}),this.getNewItems=function(t){t&&t.stopPropagation(),this.shouldGetNewItems()&&this.trigger("uiWantsMoreTimelineItems",this.getNewItemsData())},this.notifyNewItems=function(t,e){this.injectNewItems(t,e)},this.injectNewItems=function(t){if(this.resetStateVariables(t),t.items_html.trim()){var e=this.$document.height();this.injectItems("prepend",t.items_html,"uiHasInjectedNewTimelineItems"),this.$window.scrollTop(this.$document.height()-e),t.has_more_items||this.select("endOfStreamSelector").remove()}},this.notifyNewItemsError=function(t){},this.after("initialize",function(){var t=this.attr.inOverlay?".PermalinkOverlay":window;this.on(t,"uiNearTheTop",this.getNewItems),this.$document=e(document),this.$window=e(window),this.on("click",{tryAgainSelector:this.tryAgainAfterWhale})})}t.exports=i}).call(e,i(1))},970:function(t,e,i){(function(e){function n(){this.defaultAttrs({itemType:"tweet",permalinkPromotedTweetSelector:".suggested-tweet-stream-container .tweet",tweetSelector:".tweet",suggestedContainerSelector:".suggested-tweet-stream-container",suggestedItemsSelector:".suggested-tweet-stream-items"}),this.injectConversationSuggestions=function(t,i){if(i.suggested_item_html&&i.suggested_item_html.length>0){var n=e(this.attr.suggestedContainerSelector),s=n.find(this.attr.suggestedItemsSelector),o=i.suggested_item_html.trim();s.children()&&0===s.children().length&&o.length>0&&(s.append(e(o)),n.removeClass("u-hidden"),this.trigger("uiHasInjectedNewTimeline"))}else i.descendants&&this.trigger(t.target,"dataGotMoreTimelineItems",i.descendants)},this.after("initialize",function(){this.on(document,"dataGotMoreTimelineItems",this.injectConversationSuggestions)})}var s=i(821),o=i(334),r=i(337),a=i(971),c=s.mixin(n,o,r,a);t.exports=c}).call(e,i(1))},971:function(t,e,i){(function(e){function n(){this.defaultAttrs({promotedTweetStoreCookieName:"h"}),this.cookie=s,this.promotedTweetDismissed=function(t,e){e.impressionId&&this.removeFromPromotedTweetStoreCookie(e)},this.removePromotedTweetsFromBlockedUser=function(t,i){var n=this.$node.find("[data-user-id="+i.userId+"].js-stream-tweet.promoted-tweet"),s=this;e.each(n,function(t,i){var n=e(i).attr("data-tweet-id");n&&s.removeFromPromotedTweetStoreCookie({id:n})})},this.removeFromPromotedTweetStoreCookie=function(t){var i;try{i=JSON.parse(s(this.attr.promotedTweetStoreCookieName))}catch(n){i=[]}e.isArray(i)||(i=[i]),i=i.filter(function(e){return e&&e.tweet_id&&e.tweet_id!==t.id}),i=0===i.length?null:JSON.stringify(i),s(this.attr.promotedTweetStoreCookieName,i)},this.after("initialize",function(){this.on("uiTweetDismissed",this.promotedTweetDismissed),this.on(document,"jsClearReinjectionCookiesForUser",this.removePromotedTweetsFromBlockedUser)})}var s=i(55);t.exports=n}).call(e,i(1))},972:function(t,e,i){(function(e){function i(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet",ownTweetSelector:".my-tweet",permalinkOverlayDialogSelector:".PermalinkOverlay",permalinkOverlaySelector:".PermalinkOverlay .permalink-container",permalinkTweetFormSelector:".inline-reply-tweetbox .tweet-form"}),this.getPermalinkTweet=function(t,e,i){var n=this.select("permalinkTweetSelector"),s=!!n.length;return s&&(i.$tweet=n),s},this.shouldHandleTweetAction=function(){return this.attr.inOverlay||!e(this.attr.permalinkOverlaySelector).length},this.initInlineReplyComposer=function(t,e,i){var n=this.$node.closest(this.attr.permalinkOverlaySelector);n.find(this.attr.permalinkTweetFormSelector).trigger("uiInitTweetbox",{condensable:!0,preventTweetingDefaultText:!1,impressionId:this.attr.impressionId,videoSupport:!0,tweetBoxDialogSelector:this.attr.permalinkOverlayDialogSelector,environment:this.attr.environment,eventData:{scribeContext:{component:"inline_reply"}},overrides:i.tweetData})},this.after("initialize",function(){if(this.attr.loggedIn){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard),e=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.composeHandler(this.getPermalinkTweet,e,this.initInlineReplyComposer).call(this),this.on(document,"uiShortcutFavorite",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,t,this.toggleFavorite)),this.on(document,"uiShortcutRetweet",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,t,this.toggleRetweet)),this.on(document,"uiShortcutReply",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,e,this.triggerTweetAction("uiReplyToTweet")))}})}t.exports=i}).call(e,i(1))},973:function(t,e){function i(){this.defaultAttrs({dismissTweetSelector:".tweet .js-action-dismiss"}),this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);this.on("click",{dismissTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiDismissTweet"))})})}t.exports=i},974:function(t,e,i){var n=i(13),s=i(337),o=i(835),r=i(334),a=i(836);t.exports=n(s,o,r,a)},975:function(t,e){function i(){this.defaultAttrs({overlaySelector:".PermalinkOverlay .tweet"}),this.overlayOpen=function(){this.attr.tweetSelector=this.attr.overlaySelector},this.overlayClosed=function(){this.attr.tweetSelector=this.attr.mainSelector},this.after("initialize",function(){this.on(document,"uiOverlayOpen",this.overlayOpen),this.on(document,"uiOverlayClosed",this.overlayClosed),this.attr.mainSelector=this.attr.tweetSelector})}t.exports=i},1026:function(t,e,i){var n=i(1027),s=i(1028),o=i(1029),r=i(1030),a=i(1031),c=i(1032);t.exports=function(t){r.attachTo(document),n.attachTo(document,{src:t.src,trendsCacheKey:t.trendsCacheKey,trendsModuleEndpoint:t.trendsEndpoint,show_context:t.show_context,profileUserId:t.profile_id,query:t.query}),a.attachTo(".module.trends",{loggedIn:t.loggedIn,displaySource:t.src,eventData:{scribeContext:{component:"trends"}}}),s.attachTo(document),o.attachTo(document),c.attachTo("#trends_dialog",{typeaheadData:t.typeaheadData,eventData:{scribeContext:{component:"trends_location_dialog"}}})}},1027:function(t,e,i){(function(e){function n(){this.defaultAttrs({src:"module",$backoffNode:e(window),trendsModuleEndpoint:"/i/trends",trendsCacheKey:null,show_context:!0,trendsPollingOptions:{focusedInterval:3e5,blurredInterval:12e5,eventData:{source:"clock"}}}),this.makeTrendsRequest=function(t){var e=t.woeid,i=t.source,n=function(t){t.source=i,this.trigger("dataTrendsRefreshed",t)};this.get({url:this.attr.trendsModuleEndpoint,eventData:t,data:{k:this.currentCacheKey,woeid:e,pc:!0,personalized:t.personalized,src:this.attr.src,show_context:this.attr.show_context,profileUserId:this.attr.profileUserId,query:this.attr.query},success:n.bind(this),error:"dataTrendsRefreshedError"})},this.makeTrendsDialogRequest=function(t,e){var i={woeid:t.woeid,personalized:t.personalized,pc:!0},n=function(t){this.trigger("dataGotTrendsDialog",t),this.currentWoeid&&this.currentWoeid!==t.woeid&&this.trigger("dataTrendsLocationChanged"),this.currentWoeid=t.woeid,t.trends_cache_key&&(this.currentCacheKey=t.trends_cache_key,this.trigger("dataPageMutated")),t.update_module_html&&this.trigger("uiRefreshTrends",t)},s=e?this.post:this.get;s.call(this,{url:"/trends/dialog",eventData:t,data:i,success:n.bind(this),error:"dataGotTrendsDialogError"})},this.changeTrendsLocation=function(t,e){this.makeTrendsDialogRequest(e,!0)},this.refreshTrends=function(t,e){e=e||{},this.makeTrendsRequest(e)},this.getTrendsDialog=function(t,e){e=e||{},this.makeTrendsDialogRequest(e)},this.updateTrendsCacheKey=function(t,e){this.currentCacheKey=e.trendsCacheKey},this.after("initialize",function(){this.currentCacheKey=this.attr.trendsCacheKey,this.timer=o("uiRefreshTrends",this.attr.$backoffNode,this.attr.trendsPollingOptions),this.on("uiWantsTrendsDialog",this.getTrendsDialog),this.on("uiChangeTrendsLocation",this.changeTrendsLocation),this.on("uiRefreshTrends",this.refreshTrends),this.on("dataTempTrendsCacheKeyChanged",this.updateTrendsCacheKey)})}var s=i(13),o=i(408),r=i(138);t.exports=s(n,r)}).call(e,i(1))},1028:function(t,e,i){function n(){this.getTrendsLocationDialog=function(t,e){var i=function(t){this.trigger("dataGotTrendsLocationDialog",t),t.trendLocations&&this.trigger("dataLoadedTrendLocations",{trendLocations:t.trendLocations})};this.get({url:"/trends/location_dialog",eventData:e,success:i.bind(this),error:"dataGotTrendsLocationDialogError"})},this.updateTrendsLocation=function(t,e){var i=e.location||{},n={woeid:i.woeid,personalized:e.personalized,pc:!0},s=function(t){this.trigger("dataChangedTrendLocation",{personalized:t.personalized,location:i}),t.trends_cache_key&&(this.trigger("dataTempTrendsCacheKeyChanged",{trendsCacheKey:t.trends_cache_key}),this.trigger("dataPageMutated")),t.update_module_html&&this.trigger("uiRefreshTrends",t)};this.post({url:"/trends/dialog",eventData:e,data:n,success:s.bind(this),error:"dataGotTrendsLocationDialogError"})},this.after("initialize",function(){this.on("uiWantsTrendsLocationDialog",this.getTrendsLocationDialog),this.on("uiChangeLocation",this.updateTrendsLocation)})}var s=i(13),o=i(138);t.exports=s(n,o)},1029:function(t,e,i){function n(){this.defaultAttrs({storageName:"recent_trend_locations",storageKey:"locations",maxRecentLocations:5}),this.initializeStorage=function(){var t=o({withArray:!0,withMaxElements:!0});this.storage=new t(this.attr.storageName),this.storage.setMaxElements(this.attr.storageKey,this.attr.maxRecentLocations)},this.getRecentTrendLocations=function(){this.trigger("dataGotRecentTrendLocations",{trendLocations:this.storage.getArray(this.attr.storageKey)})},this.saveRecentLocation=function(t,e){var i=e.location||{};i.woeid&&!this.hasRecentLocation(i.woeid)&&(this.storage.push(this.attr.storageKey,i),this.getRecentTrendLocations())},this.hasRecentLocation=function(t){var e=this.storage.getArray(this.attr.storageKey);return e.some(function(e){return e.woeid===t})},this.after("initialize",function(){this.initializeStorage(),this.on("uiWantsRecentTrendLocations",this.getRecentTrendLocations),this.on("dataChangedTrendLocation",this.saveRecentLocation)})}var s=i(13),o=i(140),r=i(138);t.exports=s(n,r)},1030:function(t,e,i){function n(){this.scribeTrendClick=function(t,e){this.scribe("search",e)},this.prepareScribeData=function(t){var e=t.initial?"initial":"newer",i={referring_event:e},n=!1;return i.items=t.items.map(function(t,e){var i={name:t.name,item_type:r.trend,item_query:t.name,position:e,token:t.token,id:t.id};return t.promotedTrendId&&(i.promoted_id=t.promotedTrendId,n=!0),i}),n&&(i.promoted=n),"clock"===t.source&&(i.event_initiator=a.clientSideApp),i},this.scribeTrendsResults=function(t,e){var i=this.prepareScribeData(e),n={element:i.referring_event,action:e.items&&e.items.length?"results":"no_results"};this.scribe(n,e,i),e.initial&&this.scribeTrendsImpression(e)},this.scribeTrendsImpression=function(t){this.scribe("impression",t)},this.after("initialize",function(){this.scribeOnEvent("uiTrendsDialogOpened","open"),this.on("uiTrendSelected",this.scribeTrendClick),this.on("uiTrendsDisplayed",this.scribeTrendsResults)})}var s=i(13),o=i(43),r=i(45),a=i(824);t.exports=s(n,o)},1031:function(t,e,i){(function(e){function n(){this.defaultAttrs({changeLinkSelector:".change-trends",trendsInnerSelector:".trends-inner",trendItemSelector:".js-trend-item",trendLinkItemSelector:".js-trend-item a",itemType:"trend",displaySource:"module"}),this.openChangeTrendsDialog=function(t){this.trigger("uiShowTrendsLocationDialog"),t.preventDefault()},this.updateModuleContent=function(t,e){if(e.module_html){var i=this.$node.hasClass("hidden"),n=e.source;this.select("trendsInnerSelector").html(e.module_html),this.currentWoeid=e.woeid,this.$node.removeClass("hidden");var s=this.getTrendData(this.select("trendItemSelector"));this.trigger("uiTrendsDisplayed",{items:s,initial:i,source:n,scribeData:{woeid:this.currentWoeid}})}},this.trendSelected=function(t,i){var n=e(i.el).closest(this.attr.trendItemSelector),s=this.getTrendData(n)[0],r=n.index(),a={name:s.name,item_type:o.trend,item_query:s.name,position:r,token:s.token,id:s.id},c={position:r,query:s.name,url:n.find("a").attr("href"),woeid:this.currentWoeid};s.promotedTrendId&&(a.promoted_id=s.promotedTrendId,c.promoted=!0),c.items=[a],this.trigger("uiTrendSelected",{isPromoted:!!s.promotedTrendId,promotedTrendId:s.promotedTrendId,scribeContext:{element:"trend"},scribeData:c})},this.getTrendData=function(t){return t.map(function(){var t=e(this);return{name:t.attr("data-trend-name"),promotedTrendId:t.data("promoted-trend-id"),trendingEvent:t.hasClass("event-trend"),token:t.attr("data-trend-token"),id:t.attr("data-trends-id")}}).toArray()},this.after("initialize",function(){this.on(document,"dataTrendsRefreshed",this.updateModuleContent),this.on("click",{changeLinkSelector:this.openChangeTrendsDialog,trendLinkItemSelector:this.trendSelected}),this.trigger("uiRefreshTrends")})}var s=i(13),o=i(45),r=i(334);t.exports=s(n,r)}).call(e,i(1))},1032:function(t,e,i){(function(e){function n(){this.defaultAttrs({contentSelector:"#trends_dialog_content",quickSelectSelector:"#trend-locations-quick-select",dropdownSelector:"#trend-locations-dropdown-select",personalizedSelector:".trends-personalized",nonPersonalizedSelector:".trends-by-location",changeTrendsSelector:".customize-by-location",showDropdownSelector:".js-show-dropdown-select",showQuickSelectSelector:".js-show-quick-select",searchSelector:".trends-search-locations",nearbySelector:".trends-nearby-locations",recentSelector:".trends-recent-locations",currentLocationSelector:".trends-current-location",loadingSelector:"#trend-locations-loading",defaultSelector:".select-default",doneSelector:".done",errorSelector:".trends-dialog-error p",errorClass:"has-error"}),this.openDialog=function(t,e){this.trigger("uiTrendsDialogOpened"),this.initialized?this.setCurrentView():(this.trigger("uiWantsTrendsLocationDialog"),this.initialized=!0),this.$node.removeClass("has-error"),this.open()},this.setCurrentView=function(){this.attr.personalized?this.showPersonalizedView():this.showNonpersonalizedView(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showPersonalizedView=function(){this.select("nonPersonalizedSelector").hide(),this.select("personalizedSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showNonpersonalizedView=function(){this.select("personalizedSelector").hide(),this.select("nonPersonalizedSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showQuickSelectContainer=function(t,e){this.showNonpersonalizedView(),this.select("dropdownSelector").hide(),this.select("quickSelectSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showDropdownContainer=function(t,e){this.showNonpersonalizedView(),this.select("quickSelectSelector").hide(),this.select("dropdownSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.hideViews=function(){this.select("personalizedSelector").hide(),this.select("nonPersonalizedSelector").hide()},
this.showError=function(t,e){this.hideViews(),this.hideLoading(),this.initialized=!1,this.$node.addClass(this.attr.errorClass),this.select("errorSelector").html(e.message),this.trigger(this.$dialog,"uiDialogContentChanged")},this.selectDefault=function(t,i){var n=e(t.target),s=!!n.data("personalized");s?this.setPersonalizedTrends():this.changeLocationInfo({name:n.data("name"),woeid:n.data("woeid")}),this.close()},this.reset=function(t,e){this.showQuickSelectContainer(),this.trigger("uiTrendsDialogReset")},this.initializeDialog=function(t,e){this.select("contentSelector").html(e.dialog_html),this.setLocationInfo(t,e),this.initializeComponents(),this.setCurrentView()},this.showLoading=function(){this.select("loadingSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.hideLoading=function(){this.select("loadingSelector").hide()},this.initializeComponents=function(t,e){c.attachTo(this.attr.currentLocationSelector,{location:this.attr.location,personalized:this.attr.personalized}),a.attachTo(this.attr.searchSelector,{typeaheadData:this.attr.typeaheadData}),r.attachTo(this.attr.dropdownSelector),h.attachTo(this.attr.nearbySelector,{location:this.attr.location,personalized:this.attr.personalized}),l.attachTo(this.attr.recentSelector,{location:this.attr.location,personalized:this.attr.personalized})},this.after("initialize",function(){this.hideViews(),this.on("uiChangeLocation",this.showLoading),this.on("uiTrendsLocationSearchNoResults",this.showDropdownContainer),this.on(document,"uiShowTrendsLocationDialog",this.openDialog),this.on("uiDialogClosed",this.reset),this.on(document,"dataGotTrendsLocationDialog",this.initializeDialog),this.on(document,"dataGotTrendsLocationDialogError",this.showError),this.on("uiLocationInfoUpdated",this.hideLoading),this.on("click",{doneSelector:this.close,defaultSelector:this.selectDefault,changeTrendsSelector:this.showNonpersonalizedView,showDropdownSelector:this.showDropdownContainer,showQuickSelectSelector:this.showQuickSelectContainer})})}var s=i(13),o=i(63),r=i(1033),a=i(1035),c=i(1036),h=i(1037),l=i(1039),d=i(1034);t.exports=s(n,o,d)}).call(e,i(1))},1033:function(t,e,i){(function(e){function n(){this.defaultAttrs({regionsSelector:'select[name="regions"]',citiesSelector:'select[name="cities"]'}),this.initializeCities=function(){this.citiesByRegionWoeid={};var t=this.$cities.find("option");t.each(function(t,i){var n=e(i),s=n.data("woeid");this.citiesByRegionWoeid[s]||(this.citiesByRegionWoeid[s]=[]),this.citiesByRegionWoeid[s].push(n)}.bind(this))},this.updateDropdown=function(){var t=this.$regions.val(),e=this.citiesByRegionWoeid[t]||"";this.$cities.empty(),this.$cities.html(e)},this.updateRegion=function(){this.updateDropdown();var t=this.$cities.children().first();t.length&&(t.prop("selected",!0),t.change())},this.updateCity=function(){var t=this.$cities.find("option:selected"),e=parseInt(t.val(),10),i=t.data("name");this.currentSelection=e,this.changeLocationInfo({woeid:e,name:i})},this.possiblyClearSelection=function(){this.currentSelection!==this.attr.location.woeid&&this.reset()},this.reset=function(){this.currentSelection=null;var t=this.$regions.find('option[value=""]');t.prop("selected",!0),this.updateDropdown()},this.after("initialize",function(){this.$regions=this.select("regionsSelector"),this.$cities=this.select("citiesSelector"),this.initializeCities(),this.on(this.$regions,"change",this.updateRegion),this.on(this.$cities,"change",this.updateCity),this.on(document,"uiTrendsDialogReset",this.reset),this.on("uiLocationInfoUpdated",this.possiblyClearSelection),this.updateDropdown()})}var s=i(13),o=i(1034);t.exports=s(n,o)}).call(e,i(1))},1034:function(t,e){function i(){this.defaultAttrs({location:{},personalized:!1}),this.setLocationInfo=function(t,e){this.attr.personalized=!!e.personalized,this.attr.location=e.location||{},this.trigger("uiLocationInfoUpdated")},this.changeLocationInfo=function(t){this.trigger("uiChangeLocation",{location:t})},this.setPersonalizedTrends=function(){this.trigger("uiChangeLocation",{personalized:!0})},this.after("initialize",function(){this.on(document,"dataChangedTrendLocation",this.setLocationInfo)})}t.exports=i},1035:function(t,e,i){function n(){this.defaultAttrs({inputSelector:"input.trends-location-search-input"}),this.executeTypeaheadSelection=function(t,e){return e.item.woeid===-1?void this.trigger("uiTrendsLocationSearchNoResults"):(this.currentSelection=e.item,void this.changeLocationInfo({woeid:e.item.woeid,name:e.item.name}))},this.possiblyClearSelection=function(){this.currentSelection&&this.currentSelection.woeid!==this.attr.location.woeid&&this.reset()},this.reset=function(t,e){this.currentSelection=null,this.$input.val("")},this.after("initialize",function(){this.$input=this.select("inputSelector"),this.on("uiTypeaheadItemSelected uiTypeaheadItemComplete",this.executeTypeaheadSelection),this.on("uiLocationInfoUpdated",this.possiblyClearSelection),this.on(document,"uiTrendsDialogReset",this.reset),a.attachTo(this.$node,{inputSelector:this.attr.inputSelector}),r.attachTo(this.$node,{inputSelector:this.attr.inputSelector,hideOnEmptyQuery:!0,blockLinkActions:!0,datasourceRenders:[["trendLocations",["trendLocations"]]],deciders:this.attr.typeaheadData,eventData:{scribeContext:{component:"trends_location_search"}}})})}var s=i(13),o=i(1034),r=i(210),a=i(225);t.exports=s(n,o)},1036:function(t,e,i){function n(){this.defaultAttrs({personalizedSelector:".js-location-personalized",nonpersonalizedSelector:".js-location-nonpersonalized",currentLocationSelector:".current-location"}),this.updateView=function(){this.attr.personalized||this.select("currentLocationSelector").text(this.attr.location.name),this.select("nonpersonalizedSelector").toggle(!this.attr.personalized),this.select("personalizedSelector").toggle(!!this.attr.personalized)},this.after("initialize",function(){this.updateView(),this.on("uiLocationInfoUpdated",this.updateView)})}var s=i(13),o=i(1034);t.exports=s(n,o)},1037:function(t,e,i){function n(){}var s=i(13),o=i(1038);t.exports=s(n,o)},1038:function(t,e,i){(function(e){function n(){s.mixin(this,[o]),this.defaultAttrs({locationSelector:".trend-location-picker-item",selectedAttr:"selected"}),this.selectLocation=function(t,i){t.preventDefault();var n=e(i.el),s={woeid:n.data("woeid"),name:n.data("name")};this.changeLocationInfo(s),this.showSelected(s.woeid,!1)},this.showSelected=function(t,e){var i=this.select("locationSelector");i.removeClass(this.attr.selectedAttr),!e&&t&&i.filter('[data-woeid="'+t+'"]').addClass(this.attr.selectedAttr)},this.locationInfoUpdated=function(){this.showSelected(this.attr.location.woeid,this.attr.personalized)},this.after("initialize",function(){this.on("uiLocationInfoUpdated",this.locationInfoUpdated),this.on("click",{locationSelector:this.selectLocation}),this.showSelected(this.attr.location.woeid,this.attr.personalized)})}var s=i(23),o=i(1034);t.exports=n}).call(e,i(1))},1039:function(t,e,i){function n(){this.defaultAttrs({listContainerSelector:".trend-location-picker"}),this.loadTrendLocations=function(t,e){var i=e.trendLocations;this.$list.empty(),i.forEach(function(t){var e=this.$template.clone(!1),i=e.find("button");i.text(t.name),i.attr("data-woeid",t.woeid),i.attr("data-name",t.name),this.$list.append(e)},this),this.$node.toggle(i.length>0)},this.after("initialize",function(){this.$list=this.select("listContainerSelector"),this.$template=this.$list.find("li:first").clone(!1),this.on(document,"dataGotRecentTrendLocations",this.loadTrendLocations),this.trigger("uiWantsRecentTrendLocations")})}var s=i(13),o=i(1038);t.exports=s(n,o)},1087:function(t,e,i){(function(e){"use strict";function n(){this.defaultAttrs({promotedTweetSelector:".promoted-tweet:not(.scribed)",promotedTweetForImpressionsSelector:".promoted-tweet:not(.presented)",scrollThrottle:100}),this.processTweets=function(){var t=r.getGlobalNavHeight(),i=this.$node.find(this.attr.promotedTweetSelector),n=this.$node.find(this.attr.promotedTweetForImpressionsSelector),s=i.filter(function(i,n){return r.isContainedInViewport(this.$window,e(n),t,0)}.bind(this)),o=n.filter(function(i,n){return r.isPartiallyContainedInViewport({$container:this.$window,$element:e(n),topThreshold:t,fractionInViewport:0})}.bind(this));if(o.length){o.addClass("presented");var a=o.map(function(t,i){return{impressionId:e(i).data("impression-id"),disclosureType:e(i).data("disclosure-type")}}).get();this.trigger("uiPromotedTweets1pxInViewport",{items:a})}if(s.length){s.addClass("scribed");var c=s.map(function(t,i){return{impressionId:e(i).data("impression-id"),disclosureType:e(i).data("disclosure-type")}}).get();this.trigger("uiPromotedTweetsInViewport",{items:c})}},this.after("initialize",function(t,i){this.$window=e(window),i&&i.inOverlay?this.on(t,"scroll resize",o.throttle(this.processTweets.bind(this),this.attr.scrollThrottle)):this.on(document,"scroll resize",o.throttle(this.processTweets.bind(this),this.attr.scrollThrottle)),this.on(document,"uiSwiftLoaded uiPageVisible uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems",this.processTweets)})}var s=i(13),o=i(28),r=i(76);t.exports=s(n)}).call(e,i(1))},1448:function(t,e,i){"use strict";function n(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet"}),this.scribePermalinkImpression=function(){var t=this.select("permalinkTweetSelector"),e=this.getCardDataFromContainer(t);e.hasCard&&this.scribeCardInteraction("show",e)},this.after("initialize",function(){this.scribePermalinkImpression()})}var s=i(13),o=i(42),r=i(40);t.exports=s(n,o,r)},1449:function(t,e,i){(function(e){function n(t){o.attachTo(document),s.attachTo(".permalink-container")}var s=i(1450),o=i(1451),r=e(".PermalinkProfile-overlay").length>0;t.exports=r?n:e.noop}).call(e,i(1))},1450:function(t,e,i){(function(e){function n(){this.defaultAttrs({permalinkCloseButtonSelector:".PermalinkProfile-dismiss",profileBackgroundCloseSelector:".PermalinkProfile-overlay"}),this.handlePermalinkCloseButton=function(t){this.trigger("uiTweetArrowDismiss"),this.$node.fadeOut()},this.handleOverlayClick=function(t){this.trigger("uiTweetArrowBackgroundDismiss"),this.$node.fadeOut()},this.after("initialize",function(){this.$node.show().css("opacity","1"),this.on(e(this.attr.profileBackgroundCloseSelector),"click",this.handleOverlayClick),this.on("click",{permalinkCloseButtonSelector:this.handlePermalinkCloseButton})})}var s=i(13);t.exports=s(n)}).call(e,i(1))},1451:function(t,e,i){function n(){this.defaultAttrs({dialogComponentName:"dialog"}),this.namespace=function(t,e,i){return{component:t,element:e,action:i}},this.after("initialize",function(){this.scribeOnEvent("uiTweetArrowDismiss",this.namespace(this.attr.dialogComponentName,"dismiss","dismiss")),this.scribeOnEvent("uiTweetArrowBackgroundDismiss",this.namespace(this.attr.dialogComponentName,"background","dismiss")),this.scribeOnEvent("uiPermalinkGalleryOpen",this.namespace(null,"gallery","open"))})}var s=i(13),o=i(43);t.exports=s(n,o)},1452:function(t,e,i){(function(e){function n(){this.defaultAttrs({moduleSelector:".ThreadedConversation",viewOtherSelector:".ThreadedConversation-viewOther",viewOtherLinkSelector:".ThreadedConversation-viewOther a",showMoreSelector:".ThreadedConversation-showMore",showMoreLinkSelector:".ThreadedConversation-showMore a",tweetSelector:".tweet",threadedTweetSelector:".ThreadedConversation-tweet"}),this.openOverlay=function(t,i){t.preventDefault();var n=e(t.target);this.trigger("uiOverlayNavigate",{href:n.attr("href"),hostName:n.prop("hostname")});var s=n.closest(this.attr.viewOtherSelector).prev().find(this.attr.tweetSelector),o={scribeContext:this.getScribeContext(n),tweet:this.tweetData(s)};this.trigger("uiViewOtherClicked",o)},this.expandModule=function(t){t.preventDefault();var i=e(t.target),n=i.closest(this.attr.moduleSelector).find(this.attr.tweetSelector).toArray(),s={scribeContext:this.getScribeContext(i),tweets:n.map(this.tweetData,this)};this.trigger("uiShowMoreClicked",s);var o=i.closest(this.attr.showMoreSelector),r=o.data("expansion-url");i.addClass("u-hiddenVisually"),o.find(".show-more-spinner").removeClass("u-hiddenVisually"),this.trigger(o,"uiNeedsThreadedConversationTweets",{url:r})},this.tweetData=function(t){return{id:e(t).data("tweetId"),position:this.select("tweetSelector").index(t)}},this.removeLastItemClasses=function(t,e){var i=t.find(this.attr.threadedTweetSelector).last();i.removeClass("last");var n=i.next(this.attr.viewOtherSelector);n&&(n.remove(),n.removeClass("u-hiddenVisually last"),e.prepend(n))},this.animateResult=function(t,e,i){var n=e.find(".stream-items");this.removeLastItemClasses(e,i),n.children().addClass("opaque"),e.addClass("animating");var s=function(){n.children().removeClass("opaque"),e.removeClass("animating"),this.trigger(n,"uiPermalinkThreadExpanded")}.bind(this),o=i.children();n.append(o);var r=Math.max(this.getCombinedHeight(o)-t,0),a=o.first();a.css({marginTop:-r});var c=this.animationTime(r);a.animate({marginTop:0},{duration:c,queue:!1,complete:s})},this.expansionResult=function(t,i){var n=e(t.target),s=n.closest(this.attr.moduleSelector),o=this.getCombinedHeight(n);n.remove();var r=e(i.conversation_html).find(".stream-items");r.children().length&&this.animateResult(o,s,r),e(document).trigger("loadImages")},this.getCombinedHeight=function(t){return t.toArray().reduce(function(t,i){return t+e(i).outerHeight()},0)},this.animationTime=function(t){var e=2*Math.round(.35*Math.log(t)*a);return o(e)},this.expansionFailure=function(t){var i=e(t.target);i.find(".show-more-spinner").addClass("u-hiddenVisually"),i.find(".show-more-link").removeClass("u-hiddenVisually"),this.trigger("uiShowMessage",{message:"Whoops! Something went wrong. Please try again!"})},this.after("initialize",function(){this.attr.isThreaded&&(this.on("click",{viewOtherLinkSelector:this.openOverlay,showMoreLinkSelector:this.expandModule}),this.on("dataThreadedConversationResult",this.expansionResult),this.on("dataThreadedConversationError",this.expansionFailure))})}var s=i(13),o=i(884),r=i(39);i(25);t.exports=s(n,r);var a=105}).call(e,i(1))},1453:function(t,e,i){function n(){this.scribeViewOtherClick=function(t,e){this.scribe("click",e,this.tweetScribeItems([e.tweet]))},this.scribeShowMoreClick=function(t,e){this.scribe("click",e,this.tweetScribeItems(e.tweets))},this.tweetScribeItems=function(t){return{items:t.map(function(t){return{id:t.id,position:t.position,item_type:o.tweet}})}},this.after("initialize",function(){this.on("uiViewOtherClicked",this.scribeViewOtherClick),this.on("uiShowMoreClicked",this.scribeShowMoreClick)})}var s=i(13),o=i(45),r=i(43);t.exports=s(n,r)},1454:function(t,e,i){function n(){this.defaultAttrs({statsName:"threaded_conversation_expansion"}),this.requestTweets=function(t,e){if(e.url){var i=function(e){this.trigger(t.target,"dataThreadedConversationResult",e)},n=function(e,i,n){this.trigger(t.target,"dataThreadedConversationError",{status:i,errorThrown:n})};this.get({url:e.url,eventData:e,success:i.bind(this),error:n.bind(this)})}},this.after("initialize",function(){this.on("uiNeedsThreadedConversationTweets",this.requestTweets)})}var s=i(13),o=i(138),r=s(n,o);t.exports=r},1455:function(t,e,i){function n(){this.defaultAttrs({inOverlay:!1}),this.modifyItemsData=function(t){var e=t?t():{};return s.merge(e,{headers:{"X-Overlay-Request":!0,"X-Previous-Page-Name":this.attr.pageName}})},this.after("initialize",function(){this.attr.inOverlay&&(this.around("getNewItemsData",this.modifyItemsData),this.around("getOldItemsData",this.modifyItemsData))})}var s=i(28);t.exports=n}});
//# sourceMappingURL=12.pages_permalink.en.eb76fbf7e27114a19338.js.map